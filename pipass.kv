#:kivy 2.0.0

<DeviceLoadingScreen>:
    FloatLayout:
        pos: root.x, root.y
        size: root.width, root.height

        Label:
            # size_hint: .2, .7
            halign: 'right'
            text: 'Waiting for device to be connected...'
            color: 0.53, 0.53, 0.53, 1

        MDSpinner:
            size_hint: None, None
            size: dp(60), dp(60)
            active: True
            pos_hint: {'center_y': 0.2, 'center_x': 0.5}
            line_width: dp(10)
            color: 0.2, 0.13, 0.8, 1
            # allow_stretch: True

<DeviceLockedScreen>:
    FloatLayout:
        pos: root.x, root.y
        size: root.width, root.height

        Label:
            # size_hint: .2, .7
            halign: 'right'
            text: 'The device is locked.'
            pos_hint: {'top': 1.0}
            color: 0.53, 0.53, 0.53, 1

        Label:
            # size_hint: .2, .7
            halign: 'right'
            text:  'Unlock the device and try again.'
            pos_hint: {'top': 0.95}
            color: 0.53, 0.53, 0.53, 1

        Image:
            id: locked_img
            source: "res/img/locked.png"
            mipmap: True
            pos_hint: {'top': 0.9, 'right': 0.65}
            size_hint: 0.3, 0.3
            # allow_stretch: True

        Button:
            id: try_again_button
            text: "Try again"
            pos_hint: {'right': 0.65, 'top': 0.3}
            size_hint: 0.3, 0.1

<PinScreen>:
    FloatLayout:
        pos: root.x + root.width / 8 + 10, root.y + root.height / 4
        size: root.width, root.height / 2
        orientation: 'vertical'
        # pos_hint: {'right': .2, 'center_y': 0.5}

        Label:
            color: 0.53, 0.53, 0.53, 1
            text: 'Enter your PIN'
            font_size: 25
            pos_hint: {'top': .9, 'right': 0.83}

        BoxLayout:
            orientation: 'horizontal'
            size: root.width, root.height / 2
            size_hint: None, None
            pos_hint: {'top': 0.4, 'right': 1}
        
            PinTextInput:
                size_hint: None, None
                size: 100, 100
                id: pin_text_input_0
                password: True
                multiline: False
                focus: True
                background_color: 0.11, 0.11, 0.11, 1
                font_size: 125
                foreground_color: 1, 1, 1, 1
                cursor_color: 0.11, 0.11, 0.11, 1   
                padding_x: [22, 0]
                padding_y: [-2, 0]
                focus: True

            PinTextInput:
                size_hint: None, None
                size: 100, 100
                id: pin_text_input_1
                password: True
                multiline: False
                focus: True
                background_color: 0.11, 0.11, 0.11, 1
                font_size: 125
                foreground_color: 1, 1, 1, 1
                cursor_color: 0.11, 0.11, 0.11, 1   
                padding_x: [22, 0]
                padding_y: [-2, 0]
                focus: False

            PinTextInput:
                size_hint: None, None
                size: 100, 100
                id: pin_text_input_2
                password: True
                multiline: False
                focus: True
                background_color: 0.11, 0.11, 0.11, 1
                font_size: 125
                foreground_color: 1, 1, 1, 1
                cursor_color: 0.11, 0.11, 0.11, 1   
                padding_x: [22, 0]
                padding_y: [-2, 0]
                focus: False

            PinTextInput:
                size_hint: None, None
                size: 100, 100
                id: pin_text_input_3
                password: True
                multiline: False
                focus: True
                background_color: 0.11, 0.11, 0.11, 1
                font_size: 125
                foreground_color: 1, 1, 1, 1
                cursor_color: 0.11, 0.11, 0.11, 1   
                padding_x: [22, 0]
                padding_y: [-2, 0]
                focus: False
                

<BaseShadowWidget>
    size_hint: None, None
    size: 100, 100
    elevation: 25
    pos_hint: {'center_x': .5}

<CredentialInformationBody>:
    size_hint: 0.65, 1.0
    pos_hint: {'top': 1.0}
    background_color: 0.88, 0.88, 0.88, 1
    orientation: 'vertical'
    padding: [self.width / 15, self.height / 20]
    cols: 2
    
    MDLabel:
        text: "Information"
        font_size: 18
        size_hint: 0.5, 0.1
        theme_text_color: "Custom"
        text_color: app.theme_cls.opposite_bg_normal
        

    ElevatedGridLayout:
        id: details_layout
        size_hint: 1.0, 0.9
        cols: 1
        padding: [10, 10]

        canvas.before:
            Color:
                rgba: app.theme_cls.bg_light
            Rectangle:
                pos: self.pos
                size: self.size


<AddCredentialBody>:
    size_hint: 0.65, 1.0
    pos_hint: {'top': 1.0}
    background_color: 0.88, 0.88, 0.88, 1
    orientation: 'vertical'
    padding: [self.width / 15, self.height / 20]
    cols: 1

    MDLabel:
        text: "Add Item"
        font_size: 18
        size_hint: 0.5, 0.1
        theme_text_color: "Custom"
        text_color: app.theme_cls.opposite_bg_normal

    ElevatedGridLayout:
        size_hint: 1.0, 0.9
        cols: 1
        padding: [10, 10]
        

        canvas.before:
            Color:
                rgba: app.theme_cls.bg_light
            Rectangle:
                pos: self.pos
                size: self.size

        ScrollView:
            size_hint: 1.0, 1.0
            do_scroll_x: False
            do_scroll_y: True
            pos_hint: {'top': 1.0}
            bar_color: 0.88, 0.88, 0.88, 1
            bar_width: 5
            

            canvas.before:
                Color:
                    rgba: app.theme_cls.bg_light
                Rectangle:
                    pos: self.pos
                    size: self.size

            MDGridLayout:
                size_hint: 1.0, 0.9
                cols: 1
                size_hint_y: None
                padding: [10, 5]
                spacing: -dp(40)   

                Label:
                    text: 'Type'
                    size_hint_y: None
                    size_hint_x: None

                MDBoxLayout:
                    orientation: "horizontal"
                    col: 1

                    TypeToggleButton:
                        id: password_toggle
                        text: "Password"
                        on_press: root.change_to_password_form(self)

                    TypeToggleButton:
                        id: card_toggle
                        text: "Card"
                        on_state: root.change_to_card_form(self)

                    TypeToggleButton:
                        id: button_toggle
                        text: "Other"
                        on_state: root.change_to_password_form(self)

                MDGridLayout:
                    id: form_layout
                    cols: 1

                    spacing: -dp(50)                    

<MainScreen>:
    # Main layout
    MDBoxLayout:
        size: root.width, root.height
        orientation: "vertical"

        # Body
        MDBoxLayout:
            id: body_layout
            size_hint: 1.0, 0.9
            orientation: "horizontal"
            padding: [10, 10]

            MDBoxLayout:
                size_hint: 0.35, 1.0
                orientation: "vertical"
               
                # Search
                MDTextField:
                    hint_text:"Search"
                    multiline: False
                    mode: "rectangle"
                    size_hint_y: None
                    size_hint_x: 0.9
                    pos_hint: {"center_x": 0.5}

                # Credentials list
                ScrollView:
                    size_hint: 1.0, 1.0
                    do_scroll_x: False
                    do_scroll_y: True
                    pos_hint: {'top': 1.0}
                    bar_color: 0.88, 0.88, 0.88, 1
                    bar_width: 5
                    scroll_distance: "120sp"
                    scroll_wheel_distance: "120sp"
                    

                    MDList:
                        id: credential_list                                        

        # Footer
        MDStackLayout:
            id: footer_layout
            size_hint: 1.0, 0.1
            pos_hint: {'top': 0.0}
            background_color: 0.76, 0.76, 0.76, 1
            orientation: 'tb-lr'

            MDIconButton:
                size_hint: 0.4, 1
                icon: "plus"
                font_size: 35
                on_release: root.change_to_add_credential_body()

            